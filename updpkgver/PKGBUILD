# Maintainer: Abdur-Rahman Mansoor <mansoorar at proton dot me>

pkgname='updpkgver'
pkgver='1.0.1'
pkgrel='1'
url="https://github.com/Ramenu/$pkgname"
pkgdesc='Automatically updates package versions to the newest release'
arch=('any')
makedepends=('git')
depends=('python>=3')
license=('MIT')
source=("https://github.com/Ramenu/$pkgname/archive/refs/tags/v$pkgver.tar.gz")
b2sums=('eb87e24e20092b99b37646e9348c2b8ad5f1a094aba8d93f87b31bb092f71bacbaf6d08f06a02607f2e06db2b18daadc22eb7b1fec24da60f89370f85706e878')

package() {
	cd "$srcdir/$pkgname-$pkgver"
	pkg_directory="$pkgdir/opt/$pkgname"
	mkdir -p "$pkg_directory"
	install -Dm755 ./updpkgver.py -t "$pkg_directory"
	install -Dm644 ./srcinfo.py -t "$pkg_directory"
	install -Dm644 ./log.py -t "$pkg_directory"
	install -Dm644 ./common.py -t "$pkg_directory"
	install -Dm644 ./api.py -t "$pkg_directory"
	ln -sf "$pkgdir/usr/bin/updpkgver" "$pkg_directory/updpkgver.py"
}

